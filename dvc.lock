schema: '2.0'
stages:
  convert_ann_ls_yolo:
    cmd: python -m src.watch_recognition.data_processing.convert_kp_ls_yolo 
      annotations/keypoints/labelstudio/kp_annotations.json
    deps:
    - path: annotations/keypoints/labelstudio/kp_annotations.json
      hash: md5
      md5: 95f112d7efc84e8e778874e38e0e5f90
      size: 6113919
    - path: src/watch_recognition/data_processing/convert_kp_ls_yolo.py
      hash: md5
      md5: 4b73885039fccbd3a72d87f1d0ecec77
      size: 5413
    outs:
    - path: annotations/keypoints/yolo
      hash: md5
      md5: 34d53ba93559441909051f956358eb5f.dir
      size: 598295
      nfiles: 1500
  generate_yolo_dataset:
    cmd: python -m src.watch_recognition.data_processing.generate_yolo_dataset 
      -a annotations/keypoints/yolo/
    deps:
    - path: annotations/keypoints/yolo/
      hash: md5
      md5: 34d53ba93559441909051f956358eb5f.dir
      size: 598295
      nfiles: 1500
    - path: src/watch_recognition/data_processing/generate_yolo_dataset.py
      hash: md5
      md5: ff7c4b13712c64834c1e1889ca977936
      size: 4426
    params:
      params.yaml:
        yolo_dataset_gen.train_imgs_num: 1000
    outs:
    - path: datasets/yolo
      hash: md5
      md5: df2fe204a82bae613d2d8b04571b7a1a.dir
      size: 102284853
      nfiles: 3100
  evaluate:
    cmd: python -m src.watch_recognition.evaluation models/keypoints/best.pt
    deps:
    - path: models/keypoints/best.pt
      hash: md5
      md5: a2975bd3a32ac8182393ea873efc4d40
      size: 52920170
    - path: src/watch_recognition/config/data.yaml
      hash: md5
      md5: 0564ea5ff4def92ba41caa65e9142feb
      size: 466
    - path: src/watch_recognition/evaluation.py
      hash: md5
      md5: 427df9cfd637edfb42f3572667d65fc0
      size: 2550
    outs:
    - path: dvclive
      hash: md5
      md5: 58f628cea73f27d9aa2361fba3bb4015.dir
      size: 20048
      nfiles: 2
