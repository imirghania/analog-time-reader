schema: '2.0'
stages:
  convert_ann_ls_yolo:
    cmd: python -m src.watch_recognition.data_processing.convert_kp_ls_yolo 
      annotations/keypoints/labelstudio/kp_annotations.json
    deps:
    - path: annotations/keypoints/labelstudio/kp_annotations.json
      hash: md5
      md5: 9867f7daaa79f530c67a8dd40845b216
      size: 5081298
    - path: src/watch_recognition/data_processing/convert_kp_ls_yolo.py
      hash: md5
      md5: 4b73885039fccbd3a72d87f1d0ecec77
      size: 5413
    outs:
    - path: annotations/keypoints/yolo
      hash: md5
      md5: a01c3249613bf1e23242648459b94107.dir
      size: 498843
      nfiles: 1250
  generate_yolo_dataset:
    cmd: python -m src.watch_recognition.data_processing.generate_yolo_dataset 
      -a annotations/keypoints/yolo/
    deps:
    - path: annotations/keypoints/yolo/
      hash: md5
      md5: a01c3249613bf1e23242648459b94107.dir
      size: 498843
      nfiles: 1250
    - path: src/watch_recognition/data_processing/generate_yolo_dataset.py
      hash: md5
      md5: ff7c4b13712c64834c1e1889ca977936
      size: 4426
    params:
      params.yaml:
        yolo_dataset_gen.train_imgs_num: 1000
    outs:
    - path: datasets/yolo
      hash: md5
      md5: 7e1e46d6027a9504a3347b711409fa11.dir
      size: 81675553
      nfiles: 2600
  evaluate:
    cmd: python -m src.watch_recognition.evaluation models/keypoints/best.pt
    deps:
    - path: models/keypoints/best.pt
      hash: md5
      md5: c41536ca89c0f6162cc73f35a01e4263
      size: 52928746
    - path: src/watch_recognition/config/data.yaml
      hash: md5
      md5: 0564ea5ff4def92ba41caa65e9142feb
      size: 466
    - path: src/watch_recognition/evaluation.py
      hash: md5
      md5: 427df9cfd637edfb42f3572667d65fc0
      size: 2550
    outs:
    - path: dvclive
      hash: md5
      md5: 6597028c02794adfbd2848dac23059ac.dir
      size: 20276
      nfiles: 2
