schema: '2.0'
stages:
  convert_ann_ls_yolo:
    cmd: python -m src.watch_recognition.data_processing.convert_kp_ls_yolo 
      annotations/keypoints/labelstudio/kp_annotations.json
    deps:
    - path: annotations/keypoints/labelstudio/kp_annotations.json
      hash: md5
      md5: 03d009f503a34b1252cf445918df58f3
      size: 4186757
    - path: src/watch_recognition/data_processing/convert_kp_ls_yolo.py
      hash: md5
      md5: 4b73885039fccbd3a72d87f1d0ecec77
      size: 5413
    outs:
    - path: annotations/keypoints/yolo
      hash: md5
      md5: 7cf684c8936c3bb9a4a04a78e3e5c8e7.dir
      size: 400029
      nfiles: 1200
  generate_yolo_dataset:
    cmd: python -m src.watch_recognition.data_processing.generate_yolo_dataset 
      -a annotations/keypoints/yolo/
    deps:
    - path: annotations/keypoints/yolo/
      hash: md5
      md5: 7cf684c8936c3bb9a4a04a78e3e5c8e7.dir
      size: 400029
      nfiles: 1200
    - path: src/watch_recognition/data_processing/generate_yolo_dataset.py
      hash: md5
      md5: ff7c4b13712c64834c1e1889ca977936
      size: 4426
    params:
      params.yaml:
        yolo_dataset_gen.train_imgs_num: 1000
    outs:
    - path: datasets/yolo
      hash: md5
      md5: a2ef95f17a604daf0cd6e39470e68e13.dir
      size: 86723979
      nfiles: 2500
  evaluate:
    cmd: python -m src.watch_recognition.evaluation models/keypoints/best.pt
    deps:
    - path: models/keypoints/best.pt
      hash: md5
      md5: 857bb62b012677d551f00b07290abfb8
      size: 52938026
    - path: src/watch_recognition/config/data.yaml
      hash: md5
      md5: 0564ea5ff4def92ba41caa65e9142feb
      size: 466
    - path: src/watch_recognition/evaluation.py
      hash: md5
      md5: 5e2cebb77402025aecf02fbfc18f6fce
      size: 2365
    outs:
    - path: dvclive
      hash: md5
      md5: 83ab8d720225f7f73ad818814ad20635.dir
      size: 19375
      nfiles: 2
