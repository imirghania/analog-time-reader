schema: '2.0'
stages:
  convert_ann_ls_yolo:
    cmd: python -m src.watch_recognition.data_processing.convert_kp_ls_yolo 
      annotations/keypoints/labelstudio/kp_annotations.json
    deps:
    - path: annotations/keypoints/labelstudio/kp_annotations.json
      hash: md5
      md5: 88ad97886061189d4de2e44a1e70c6a6
      size: 6718963
    - path: src/watch_recognition/data_processing/convert_kp_ls_yolo.py
      hash: md5
      md5: 4b73885039fccbd3a72d87f1d0ecec77
      size: 5413
    outs:
    - path: annotations/keypoints/yolo
      hash: md5
      md5: d4251d4b66ddc90ceed1f7b6bacf21e8.dir
      size: 656653
      nfiles: 1650
  generate_yolo_dataset:
    cmd: python -m src.watch_recognition.data_processing.generate_yolo_dataset 
      -a annotations/keypoints/yolo/
    deps:
    - path: annotations/keypoints/yolo/
      hash: md5
      md5: d4251d4b66ddc90ceed1f7b6bacf21e8.dir
      size: 656653
      nfiles: 1650
    - path: src/watch_recognition/data_processing/generate_yolo_dataset.py
      hash: md5
      md5: ff7c4b13712c64834c1e1889ca977936
      size: 4426
    params:
      params.yaml:
        yolo_dataset_gen.train_imgs_num: 1000
    outs:
    - path: datasets/yolo
      hash: md5
      md5: 7f4c8ae3e812070642d72b353df027e1.dir
      size: 104651780
      nfiles: 3400
  evaluate:
    cmd: python -m src.watch_recognition.evaluation models/keypoints/best.pt
    deps:
    - path: models/keypoints/best.pt
      hash: md5
      md5: 739c8a78a9c57e6c7e828078f037ce21
      size: 52909610
    - path: src/watch_recognition/config/data.yaml
      hash: md5
      md5: 0564ea5ff4def92ba41caa65e9142feb
      size: 466
    - path: src/watch_recognition/evaluation.py
      hash: md5
      md5: 427df9cfd637edfb42f3572667d65fc0
      size: 2550
    outs:
    - path: dvclive
      hash: md5
      md5: 778e3842967c1d2d4f9eaa6a77d95a93.dir
      size: 21967
      nfiles: 2
